---
import Switch from './ui/Switch.astro'
---

<script>
  const NIGHT_SWITCH = document.getElementById('night-switch')

  if (NIGHT_SWITCH !== null) {
    /** @desc 在未初始化DOM时已初始化颜色模式 */
    const isDark = document.documentElement.classList.contains('dark')

    NIGHT_SWITCH.dataset.state = isDark ? 'checked' : 'unchecked'
    NIGHT_SWITCH.addEventListener('click', () => {
      const isDark = document.documentElement.classList.toggle('dark')
      NIGHT_SWITCH.dataset.state = isDark ? 'checked' : 'unchecked'
      localStorage.setItem('color-scheme', isDark ? 'dark' : 'light')
    })
  }
</script>
<Switch id="night-switch">
  <i
    class="i-uil-sun dark:i-uil-moonset text-night-5 dark:text-snow-1"
    slot="icon"></i>
</Switch>
